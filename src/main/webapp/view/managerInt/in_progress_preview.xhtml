<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	template="/WEB-INF/templates/layouts/private.xhtml">
	<ui:define name="additional-head">
        <script src="https://api-maps.yandex.ru/2.1/?lang=ru_RU&amp;apikey=8453d835-3c9f-452f-977f-cea31785f278" type="text/javascript"></script>
        <script src="https://yandex.st/jquery/2.2.3/jquery.min.js" type="text/javascript"></script>
    </ui:define>
	<ui:define name="content">
		<div class="container">
			<div class="jukForm">
				<h:form>
					<h:panelGroup id="messages">
						<p:growl globalOnly="true" />
					</h:panelGroup>
					<div class="row">
					    <div class="col-12" style="text-align: center;">
							<H4>#{msgs.shipmentInfo}</H4>
						</div>
						<div class="col-6 mt-3">
						      <div class="col-12">
							      <a> <i class="fa fa-bullhorn" aria-hidden="true"></i> </a>
								  <h:outputText value="#{msgs.transportType} : " />
								  <h:outputText value="#{managerController.shipments.transportType.name}" />
							  </div>
							  <div class="col-12">
							      <a><i class="fas fa-balance-scale-right"></i></a>
								  <h:outputText value="#{msgs.capacity} : " />
								  <h:outputText value="#{managerController.shipments.capacity}" />
							  </div>
				              <div class="col-12">
								  <a> <i class="fas fa-clock" aria-hidden="true"></i> </a>
								  <h:outputText value="#{msgs.fromPlace} : " style="color:red"/>
								  <h:outputText value="#{managerController.shipments.dateFrom}" >
								       <f:convertDateTime pattern="dd.MM.yyyy" />
								  </h:outputText>
							  </div>
							  <div class="col-12">
								  <a> <i class="far fa-clock" aria-hidden="true"></i> </a>
								  <h:outputText value="#{msgs.toPlace} : " style="color:green" />
								  <h:outputText value="#{managerController.shipments.dateTo}" >
								       <f:convertDateTime pattern="dd.MM.yyyy" />
								  </h:outputText>
							  </div>
							  <div class="col-12">
								  <a> <i class="fas fa-money-bill-wave"></i> </a>
								  <h:outputText value="#{msgs.amount} : " />
								  <h:outputText value="#{managerController.shipments.amount} сом" style="font-weight: bold;"/>
							  </div>
							  <div class="col-12">
								  <a> <i class="fa fa-info" aria-hidden="true"></i> </a>
								  <h:outputText value="#{msgs.productInfo} : " />
								  <h:outputText value="#{managerController.shipments.products}" />
							  </div>
						</div>
						<div class="col-2 mt-3">
						   <h:panelGrid columns="1">
							      <h:panelGrid columns="2">
								      <a> <i class="fas fa-thumbtack" aria-hidden="true" style="color:red"></i> </a>
								      <h:graphicImage library="images" height="20" width="20"  name="kg.png" rendered="#{managerController.shipments.countryFrom.id eq 1}"/>
							          <h:graphicImage library="images" height="20" width="20"  name="kz.png" rendered="#{managerController.shipments.countryFrom.id eq 2}"/>
						          </h:panelGrid>
								  <h:outputText value="#{msgs.fromPlace}" style="color:red"/>
								  <h:outputText value="#{managerController.shipments.countryFrom.name}" />
								  <h:outputText value="#{managerController.shipments.oblastFrom.name}" />
								  <h:outputText value="#{managerController.shipments.regionFrom.name}" />
				
				                  <h:panelGrid columns="2">
							          <a> <i class="fas fa-thumbtack" aria-hidden="true" style="color:green"></i> </a>
							          <h:graphicImage library="images" height="20" width="20"  name="kg.png" rendered="#{managerController.shipments.countryTo.id eq 1}"/>
							          <h:graphicImage library="images" height="20" width="20"  name="kz.png" rendered="#{managerController.shipments.countryTo.id eq 2}"/>
						          </h:panelGrid>
								  <h:outputText value="#{msgs.toPlace}" style="color:green"/>
								  <h:outputText value="#{managerController.shipments.countryTo.name}" />
								  <h:outputText value="#{managerController.shipments.oblastTo.name}" />
								  <h:outputText value="#{managerController.shipments.regionTo.name}" />
							</h:panelGrid> 
						</div>
						<div class="col-4 mt-3">
						   <div id="map"></div>
						</div>
					</div>
				</h:form>
			</div>
		 </div>
			
			
           
		   <script  type="text/javascript">
			   ymaps.ready(init);
	
			   function init() {
			       var myMap = new ymaps.Map("map", {
			               center: [57.131311, 34.576128],
			               zoom: 5
			           }, {
			               searchControlProvider: 'yandex#search'
			           }),
			           // Признак начала редактирования маршрута.
			           startEditing = false,
			           button = $('#editor');
	
			       // Построение маршрута от станции метро Смоленская до станции Третьяковская.
			       // Маршрут должен проходить через метро "Арбатская".
			       ymaps.route([
			           [#{managerController.conversation.startLocation}],
			       
			           // Метро "Третьяковская".
			           [#{managerController.conversation.endLocation}]
			       ], {
			           // Автоматически позиционировать карту.
			           mapStateAutoApply: true
			       }).then(function (route) {
			           myMap.geoObjects.add(route);
			           button.click(function () {
			               if (startEditing = !startEditing) {
			                   // Включаем редактор.
			                   route.editor.start({addWayPoints: true, removeWayPoints: true});
			                   button.text('Отключить редактор маршрута');
			               } else {
			                   // Выключаем редактор.
			                   route.editor.stop();
			                   button.text('Включить редактор маршрута');
			               }
			           });
			           route.editor.events.add(["waypointadd", "waypointremove", "start"], function () {
			               if (route.getWayPoints().getLength() >= 10) {
			                   // Если на карте больше 9 точек маршрута, отключаем добавление новых точек.
			                   route.editor.start({addWayPoints: false, removeWayPoints: true});
			               }
			               else {
			                   // Включаем добавление новых точек.
			                   route.editor.start({addWayPoints: true, removeWayPoints: true});
			               }
			           })
			       }, function (error) {
			           alert("Возникла ошибка: " + error.message);
			       });
			   }
		   </script>

	</ui:define>
</ui:composition>