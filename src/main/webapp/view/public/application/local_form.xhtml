<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	template="/WEB-INF/templates/layouts/public.xhtml" id="bodyBlock">

	<ui:define name="content">
		<div class="container">
			<div class="jukForm">
				<h:form>
				
				<div class="card bg-light mb-3" >
				  <div class="card-header">Заявка на отправку груза(#{msgs.localCargo})</div>
					<div class="card-body">
					  <div class="row">
					    <div class="col-md-6">
						    <h5 class="card-title">#{msgs.transportType} :</h5>
							<h:selectOneMenu id="transportType" value="#{shipmentApplicationAction.shipments.transportType}"
								required="true" requiredMessage="#{msgs.transportType} - #{msgs.isReq}"
								converter="#{transportConverter}">
								<f:selectItem itemLabel="#{msgs.selectValue}" />
								<f:selectItems
									value="#{shipmentApplicationAction.transportTypeList}"
									var="entity" itemLabel="#{entity.name}" itemValue="#{entity}" />
							</h:selectOneMenu>
							<p:message for="transportType" />
							
							<h5 class="card-title">#{msgs.oblastFrom} :</h5>
							<h:selectOneMenu id="oblastFrom"
								value="#{countrySelector.oblast}" 
								converter="#{oblastConverter}" required="true"
								requiredMessage="#{msgs.oblastFrom} - #{msgs.isReq}">
								<f:selectItem itemLabel="#{msgs.selectValue}" />
								<f:selectItems
									value="#{countrySelector.localOblastList}"
									var="entity" itemLabel="#{entity.name}" itemValue="#{entity}" />
								<p:ajax event="change" update="regionFrom regFrom" />
							</h:selectOneMenu>
							<p:message for="oblastFrom" />
							
							<h:panelGroup  layout="block" id="regFrom" >
								<h:outputLabel for="regionFrom" value="#{msgs.regionFrom}" rendered="#{countrySelector.oblast.city!=true and countrySelector.oblast.id !=null}"/>
								<h:selectOneMenu id="regionFrom"
									value="#{countrySelector.region}" 
									converter="#{regionConverter}" required="true" rendered="#{countrySelector.oblast.city!=true and countrySelector.oblast.id !=null}"
									requiredMessage="#{msgs.oblastFrom} - #{msgs.isReq}">
									<f:selectItem itemLabel="#{msgs.selectValue}" />
									<f:selectItems
										value="#{countrySelector.getRegionList(countrySelector.oblast)}"
										var="entity" itemLabel="#{entity.name}" itemValue="#{entity}" />
								</h:selectOneMenu>
								<p:message for="regionFrom" rendered="#{countrySelector.oblast.city!=true and countrySelector.oblast.id !=null}"/>
							</h:panelGroup>
							
							<h5 class="card-title">#{msgs.addressFrom} :</h5>
							<p:inputTextarea cols="20" rows="2" id="addressFrom"
								value="#{shipmentApplicationAction.shipments.addressFrom}"
								required="true"
								requiredMessage="#{msgs.addressFrom} - #{msgs.isReq}" />
							<p:message for="addressFrom" />
							
							<h5 class="card-title">#{msgs.fromPlace} :</h5>	
							<p:calendar
								value="#{shipmentApplicationAction.shipments.dateFrom}"
								id="dateFrom" required="true" showOn="button"
								requiredMessage="#{msgs.dateFrom} - #{msgs.isReq}"
								pattern="dd-MM-yyyy HH:mm" />
							<p:message for="dateFrom" />
							
							<h5 class="card-title">#{msgs.amount} :</h5>
							<p:inputText
								value="#{shipmentApplicationAction.shipments.amount}"
								id="amount" required="true"
								requiredMessage="#{msgs.amount} - #{msgs.isReq}"
								converterMessage="Должны быть только цифры" maxlength="18"
								validatorMessage="Неправильная сумма">
								<f:convertNumber maxFractionDigits="2" minFractionDigits="2" />
							</p:inputText>
							<p:message for="amount" />
					    </div>
					    <div class="col-md-6">
					        <h5 class="card-title">#{msgs.capacity} :</h5>
							<h:inputText id="capacity"
								value="#{shipmentApplicationAction.shipments.capacity}"
								required="true"
								requiredMessage="#{msgs.capacity} - #{msgs.isReq}" />
							<p:message for="capacity" />
							
							<h5 class="card-title">#{msgs.oblastTo} :</h5>
							<h:selectOneMenu id="oblastTo" value="#{countrySelector2.oblast}"
								converter="#{oblastConverter}"
								required="true" requiredMessage="#{msgs.oblastTo} - #{msgs.isReq}">
								<f:selectItem itemLabel="#{msgs.selectValue}" />
								<f:selectItems
									value="#{countrySelector2.localOblastList}"
									var="entity" itemLabel="#{entity.name}" itemValue="#{entity}" />
								<p:ajax event="change" update="regionTo regTo" />
							</h:selectOneMenu>
							<p:message for="oblastTo" />
							
							<h:panelGroup  layout="block" id="regTo" >
								<h:outputLabel for="regionTo" value="#{msgs.regionTo}" rendered="#{countrySelector2.oblast.city!=true and countrySelector2.oblast.id !=null}"/>
								<h:selectOneMenu id="regionTo" value="#{countrySelector2.region}"
								    converter="#{regionConverter}" rendered="#{countrySelector2.oblast.city!=true and countrySelector2.oblast.id !=null}"
									required="true" requiredMessage="#{msgs.oblastFrom} - #{msgs.isReq}">
									<f:selectItem itemLabel="#{msgs.selectValue}" />
									<f:selectItems
										value="#{countrySelector2.getRegionList(countrySelector2.oblast)}"
										var="entity" itemLabel="#{entity.name}" itemValue="#{entity}" />
								</h:selectOneMenu>
								<p:message for="regionTo" rendered="#{countrySelector2.oblast.city!=true and countrySelector2.oblast.id !=null}"/>
							</h:panelGroup>
							
							<h5 class="card-title">#{msgs.addressTo} :</h5>
							<p:inputTextarea cols="20" rows="2" id="addressTo"
								value="#{shipmentApplicationAction.shipments.addressTo}"
								required="true"
								requiredMessage="#{msgs.addressTo} - #{msgs.isReq}" />
							<p:message for="addressTo" />
							
							<h5 class="card-title">#{msgs.myPhone} :</h5>
							<h:inputText id="phone"
								value="#{shipmentApplicationAction.shipments.phone}"
								required="true"
								requiredMessage="#{msgs.myPhone} - #{msgs.isReq}" />
							<p:message for="phone" />
							
							<h5 class="card-title">#{msgs.productInfo} :</h5>
							<p:inputTextarea cols="30" rows="2" id="productInfo"
								value="#{shipmentApplicationAction.shipments.products}"
								required="true"
								requiredMessage="#{msgs.productInfo} - #{msgs.isReq}" />
							<p:message for="productInfo" />
					    </div>
					  </div>  
				  </div>
			    </div>
				
				
				
				
					<div class="row">
				
						<div class="col-12">
							<p:commandButton ajax="false" value="#{msgs.send}" icon="fas fa-save"
								action="#{shipmentApplicationAction.saveLocal()}" />
								<h:outputLabel style="width:50px;display:inline-block"/>
							<p:commandButton ajax="false" immediate="true"
								value="#{msgs.cancel}" icon="fas fa-window-close"
								action="#{shipmentApplicationAction.returnHome()}" />
						</div>
					</div>
				</h:form>
			</div>
		</div>
	</ui:define>
</ui:composition>